$vs.engine.objects.Route=function(){function e(){r=this,this.url=new $vs.engine.objects.URL}function t(e){return e=i.join("/")+e,"/"!=e[0]&&(e="/"+e),e.length>1&&(e=e.replace(/\/$/,"")),e}function n(e){var t,n=[],r=!1;if(-1!==e.indexOf("{"))for(var o=e.split("/"),i=0;i<o.length;i++)-1!==o[i].indexOf("{")&&(r=!1,t=o[i].replace("{","").replace("}",""),-1!==t.indexOf("?")&&(r=!0,t=t.replace("?","")),n.push({optional:r,keyName:t}));return{keyParts:o,params:n}}var r,o,i=[],s=[];return e.instance=null,e.routes={},e.getInstance=function(){return null==e.instance&&(e.instance=new $vs.engine.objects.Route),e.instance},e.prototype.make=function(r,i){var u;r=t(r),o=r,e.routes[r]={};var a=n(r);switch(e.routes[r].params=a.params,e.routes[r].keyParts=a.keyParts,!0){case"function"==typeof i:u=i(this);break;case"string"==typeof i:u=i}return e.routes[r].destination=s.length>0?s.join("\\")+"\\"+u:u,this},e.prototype.prefix=function(e,t){return"function"==typeof t?(i.push(e),t(this),i.pop()):console.error("Second argument of prefix method must be of type function"),this},e.prototype.namespace=function(e,t){return"function"==typeof t?(s.push(e),t(this),s.pop()):console.error("Second argument of namespace method must be of type function"),this},e.prototype.group=function(e,t){var n=!1,r=!1;return"object"!=typeof e?void console.error("The first parameter of group method must be an object"):(e.hasOwnProperty("prefix")&&(r=!0,i.push(e.prefix)),e.hasOwnProperty("namespace")&&(n=!0,s.push(e.namespace)),"function"!=typeof t?void console.error("Second parameter of group method must be of type function"):(t(this),n&&s.pop(),r&&i.pop(),this))},e.prototype.name=function(t){e.routes[o].name=t},e.getByName=function(t,n){var r=Object.keys(e.routes).length;if(r>0)for(var o in e.routes){var i=e.routes[o];if("undefined"!=typeof i.name&&i.name==t){if(-1!==o.indexOf("{")){o=o.replace("?","");var s=o.match(/\{(.*?)\}/)[1];n.hasOwnProperty(s)&&(o=o.replace("{"+s+"}",n[s]))}return"#"+o}}return null},e.prototype.getCurrent=function(){if("undefined"!=typeof e.routes[this.url.get()])return e.routes[this.url.get()].destination;var t,n=this.url.get().split("/"),r=[],o=Object.keys(e.routes);for(var i in o)if(-1!==o[i].indexOf("{")&&(r=o[i].split("/"),r.length==n.length)){t=e.routes[o[i]].destination;for(var s=0;s<r.length;s++)-1!==r[s].indexOf("{")&&(t=t+"/"+n[s])}return t},e}();